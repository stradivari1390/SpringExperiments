<!DOCTYPE html>
<html lang="en" xmlns:th="http://www.thymeleaf.org">
<div class="Cards Cards_refresh" th:fragment="pool">
    <div class="Cards">
        <div class="Card" th:each="book: ${booksList}">
            <div class="Card-picture">
                <a th:href="@{/books/{id}(id=${book.id})}">
                    <img th:src="${book.image}" alt="card.jpg"/>
                </a>
            </div>
            <div class="card-content">
                <strong class="Card-title">
                    <a th:href="@{/books/{id}(id=${book.id})}" th:text="${book.title}"></a>
                </strong>
                <div class="Card-description" th:text="${book.authorFirstName} + ' ' + ${book.authorLastName}"></div>
                <div class="card cost">
                    <span class="Card-priceOld" th:if="${book.discount != 0}"
                          th:text="'₽' + ${#numbers.formatDecimal(book.price, 1, 2)}">
                    </span>
                    <span class="Card-price" th:text="'₽' + ${#numbers.formatDecimal(book.price * (100 - book.discount) / 100, 1, 2)}">
                    </span>
                    <span class="Cart-sale" th:if="${book.discount != 0}"
                          th:text="'-' + ${#strings.toString(book.discount)} + '%'">-30%
                    </span>
                </div>
            </div>
        </div>
    </div>
    <div class="Cards-footer Cards-footer_center">
        <a class="btn btn_primary" href="#"
           th:if="${(category != 'Books by tags') && (category != 'Книги по тегам')}"
           th:attr="data-refreshshow=${(category == 'New Releases' || category == 'Новинки') ? 'recent'
                              : (category == 'Popular' || category == 'Популярное') ? 'popular'
                              : (category == 'Author' || category == 'Автор') ? 'author'
                              : (category == 'Genres' || category == 'Жанры') ? 'genre'
                              : ''},
           data-refreshoffset='10', data-refreshlimit='10'"
           th:text="#{menu.show_more}">
            Показать еще
        </a>

        <a class="btn btn_primary" href="#"
           th:if="${(category == 'Books by tags') || (category == 'Книги по тегам')}"
           th:attr="data-refreshshow='tag',
           data-refreshoffset='10', data-refreshlimit='10', data-refreshid=${tagQuery}"
           th:text="#{menu.show_more}">
        </a>
    </div>
</div>
</html>